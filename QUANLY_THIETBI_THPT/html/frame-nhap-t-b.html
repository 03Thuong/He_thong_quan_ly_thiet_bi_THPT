<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./frame-nhap-t-b.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
    />
  </head>
  <body>
    <div class="frame-nhap-tb">
      <div class="button-compact52" id="buttonCompact">
        <b class="mn-thit-b5">MƯỢN THIẾT BỊ</b>
      </div>
      <div class="button-compact53" id="buttonCompact1">
        <b class="mn-thit-b5">TRẢ THIẾT BỊ</b>
      </div>
      <div class="button-compact54">
        <div class="danh-sch-nhn-vin-frame">
          <b class="mn-thit-b5">NHẬP THIẾT BỊ</b>
        </div>
      </div>
      <div class="button-compact55" id="buttonCompact3">
        <div class="danh-sch-nhn-vin-frame">
          <b class="mn-thit-b5">DANH SÁCH NHÂN VIÊN</b>
        </div>
      </div>
      <div class="button-compact56" id="buttonCompact4">
        <div class="danh-sch-nhn-vin-frame">
          <b class="mn-thit-b5">IN PHIẾU NHẬP</b>
        </div>
      </div>
      <div class="button-compact57" id="buttonCompact5">
        <div class="danh-sch-nhn-vin-frame">
          <b class="mn-thit-b5">ĐĂNG XUẤT</b>
        </div>
      </div>
      <div class="phiu-nhp-thit-b-parent">
        <b class="phiu-nhp-thit">PHIẾU NHẬP THIẾT BỊ</b>
        <b class="m-phiu-nhp">Mã phiếu nhập</b>
        <b class="tn-thit-b3">Tên thiết bị</b>
        <b class="ngy-nhp1">Ngày nhập</b>
        <b class="s-lng-nhp">Số lượng nhập</b>
        <input type="text" class="tentb-text4" ></input><!--tentb-->
        <input type="text" class="sl-text4" ></input><!--sl-->
        <input type="text" class="matb-text4" ></input><!--mapn-->
        <input type="date" class="ngaynhap-text4" ></input> <!--ngaynhap-->
        <b class="nh-cung-cp1">Nhà cung cấp</b>
        <input type="text" class="ncc-text2" ></input><!--ncc-->
        <b class="gi-nhp">Giá nhập</b>
        <b class="m-nv2">Mã NV</b>
        <input type="text" class="bh-text10" ></input> <!--gianhap-->
        <b class="ghi-ch3">Ghi chú</b>
        <input type="text" class="ghichu-text1" ></input> <!--ghichu-->
        <input type="text" class="timkiem-text4" ></input>
        <img
          class="search-24dp-fill0-wght400-grad-icon4"
          alt=""
          src="./public/search-24dp-fill0-wght400-grad0-opsz24-1@2x.png"
        />

        <button class="button-compact58">
          <div class="danh-sch-nhn-vin-frame">
            <b class="mn-thit-b5">NHẬP LẠI</b>
          </div>
        </button>
        <button class="button-compact59" id="add-button">
          <div class="danh-sch-nhn-vin-frame">
            <b class="mn-thit-b5">THÊM</b>
          </div>
        </button>
        <button class="button-compact60">
          <div class="danh-sch-nhn-vin-frame">
            <b class="mn-thit-b5">XÓA</b>
          </div>
        </button>
        <div class="dropdown4">
          <select name="NV" id="NV">
            <option value="NV001">NV001</option>
            <option value="NV002">NV002</option>
            <option value="NV003">NV003</option>
            <option value="NV004">NV004</option>
          </select>
        </div>
        <div class="button-compact61">
          <div class="danh-sch-nhn-vin-frame">
            <b class="mn-thit-b5"> SỬA</b>
          </div>
        </div>
        <table class="table">
          <thead>
            <tr>
              <th>Mã phiếu nhập</th>
              <th>Tên thiết bị</th>
              <th>Ngày nhập</th>
              <th>Số lượng mua</th>
              <th>Nhà cung cấp</th>
              <th>Giá nhập</th>
              <th>Mã NV</th>
              <th>Ghi chú</th>
            </tr>
          </thead>
          <tbody id="employeeTableBody">
            <tr>
              <td>PN001</td>
              <td>Máy chiếu</td>
              <td>2023-11-10</td>
              <td>3</td>
              <td>Nhà cung cấp A</td>
              <td>3.000.000 đ</td>
              <td>NV001</td>
              <td></td>
            </tr>
            <tr>
              <td>PN002</td>
              <td>Tivi</td>
              <td>2023-11-12</td>
              <td>4</td>
              <td>Nhà cung cấp B</td>
              <td>16.000.000 đ</td>
              <td>NV001</td>
              <td></td>
            </tr>
            <tr>
              <td>PN003</td>
              <td>Loa</td>
              <td>2023-11-14</td>
              <td>2</td>
              <td>Nhà cung cấp C</td>
              <td>1.000.000 đ</td>
              <td>NV002</td>
              <td></td>
            </tr>
            <tr>
              <td>PN004</td>
              <td>Ổ điện</td>
              <td>2023-11-15</td>
              <td>3</td>
              <td>Nhà cung cấp A</td>
              <td>300.000 đ</td>
              <td>NV002</td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="button-compact62" id="buttonCompact6">
        <div class="danh-sch-nhn-vin-frame">
          <b class="mn-thit-b5">DANH SÁCH THIẾT BỊ</b>
        </div>
      </div>
    </div>

    <script>
      var buttonCompact = document.getElementById("buttonCompact");
      if (buttonCompact) {
        buttonCompact.addEventListener("click", function (e) {
          window.location.href = "./frame-muon-t-b.html";
        });
      }
      
      var buttonCompact1 = document.getElementById("buttonCompact1");
      if (buttonCompact1) {
        buttonCompact1.addEventListener("click", function (e) {
          window.location.href = "./frame-tra-t-b.html";
        });
      }
      
      var buttonCompact3 = document.getElementById("buttonCompact3");
      if (buttonCompact3) {
        buttonCompact3.addEventListener("click", function (e) {
          window.location.href = "./frame-d-s-n-v.html";
        });
      }
      
      var buttonCompact4 = document.getElementById("buttonCompact4");
      if (buttonCompact4) {
        buttonCompact4.addEventListener("click", function (e) {
          window.location.href = "./frame-in-p-n.html";
        });
      }
      
      var buttonCompact5 = document.getElementById("buttonCompact5");
      if (buttonCompact5) {
        buttonCompact5.addEventListener("click", function (e) {
          window.location.href = "./frame-login.html";
        });
      }
      
      var buttonCompact6 = document.getElementById("buttonCompact6");
      if (buttonCompact6) {
        buttonCompact6.addEventListener("click", function (e) {
          window.location.href = "./frame-d-s-t-b.html";
        });
      }

// Thêm nút Thêm
var addButton = document.getElementById("add-button");
// Add event listener to the add button
addButton.addEventListener("click", function (e) {

  // Get the input values
  var mapn = document.querySelector(".matb-text4").value;
  var tentb = document.querySelector(".tentb-text4").value;
  var ngaynhap = document.querySelector(".ngaynhap-text4").value;
  var sl = document.querySelector(".sl-text4").value;
  var ncc = document.querySelector(".ncc-text2").value;
  var gia = document.querySelector(".bh-text10").value;
  var nv = document.querySelector("#NV").value;
  var ghichu = document.querySelector(".ghichu-text1").value = "";
  
  // Check if the input values are not empty
  if (
    mapn!= "" &&
    tentb!= "" &&
    ngaynhap!= "" &&
    sl!= "" &&
    ncc!= "" &&
    gia!= "" &&
    nv!= ""
  ) {
    // Create a new row
    var newRow = document.createElement("tr");
    // Add cells to the row
    newRow.innerHTML = `
      <td>${mapn}</td>
      <td>${tentb}</td>
      <td>${ngaynhap}</td>
      <td>${sl}</td>
      <td>${ncc}</td>
      <td>${gia}</td>
      <td>${nv}</td>
      <td>${ghichu}</td>

    `;

    // Append the new row to the table body
    document.getElementById("employeeTableBody").appendChild(newRow); // Sử dụng id của tbody
  } else {
    alert("Vui lòng điền đầy đủ thông tin!");
  }
});


// Thêm nút Xóa
var deleteButton = document.querySelector(".button-compact60");
if (deleteButton) {
  deleteButton.addEventListener("click", function (e) {
    // Thực hiện hành động xóa
    var table = document.querySelector("table");
    var selectedRows = table.querySelectorAll(".selected");
    // Xóa các hàng được chọn
    selectedRows.forEach(row => {
      table.deleteRow(row.rowIndex);
    });

    // Reset lại các ô nhập liệu
    document.querySelector(".matb-text4").value = "";
    document.querySelector(".tentb-text4").value = "";
    document.querySelector(".ngaynhap-text4").value = "";
    document.querySelector(".sl-text4").value = "";
    document.querySelector(".ncc-text2").value = "";
    document.querySelector(".bh-text10").value = "";
    document.querySelector(".ghichu-text1").value = "";

    // Xóa chọn hàng được chọn
    var selectedRow = document.querySelector(".selected");
    if (selectedRow) {
      selectedRow.classList.remove("selected");
    }
  });
}

// Add an event listener to the table rows
var table = document.querySelector("table");
if (table) {
  table.addEventListener("click", function (e) {
    // Get the selected row
    var row = e.target.parentNode;
    while (row.tagName !== "TR") {
      row = row.parentNode;
    }
    selectRow(row);
  });
}

function selectRow(row) {
  // Remove any existing selection
  var selectedRow = document.querySelector(".selected");
  if (selectedRow) {
    selectedRow.classList.remove("selected");
  }
  
  // Add the selected class to the row
  row.classList.add("selected");
  
  // Get the row data
  var rowData = [];
  for (var i = 0; i < row.cells.length; i++) {
    rowData.push(row.cells[i].textContent.trim()); // Trim any extra whitespace
  }

  // Fill in the edit form with the row data
  document.querySelector(".matb-text4").value = rowData[0];
  document.querySelector(".tentb-text4").value = rowData[1];
  document.querySelector(".ngaynhap-text4").value = rowData[2];
  document.querySelector(".sl-text4").value = rowData[3];
  document.querySelector(".ncc-text2").value = rowData[4];
  document.querySelector(".bh-text10").value = rowData[5];

  document.querySelector(".ghichu-text1").value = rowData[7];
    // Set the "Mã NV" dropdown
    var NVDropdown = document.getElementById('NV');
  NVDropdown.value = rowData[6]; // Adjust index if needed

}
// Add an event listener to the edit button
var editButton = document.querySelector(".button-compact61");
if (editButton) {
  editButton.addEventListener("click", function (e) {
    // Get the selected row
    var selectedRow = document.querySelector(".selected");
    if (selectedRow) {
      // Update the row data with the edited values
      selectedRow.cells[0].innerHTML = document.querySelector(".matb-text4").value;
      selectedRow.cells[1].innerHTML = document.querySelector(".tentb-text4").value;
      selectedRow.cells[2].innerHTML = document.querySelector(".ngaynhap-text4").value;
      selectedRow.cells[3].innerHTML = document.querySelector(".sl-text4").value;
      selectedRow.cells[4].innerHTML = document.querySelector(".ncc-text2").value;
      selectedRow.cells[5].innerHTML = document.querySelector(".bh-text10").value;
      selectedRow.cells[6].innerHTML = document.querySelector("#NV").value;
      selectedRow.cells[7].innerHTML = document.querySelector(".ghichu-text1").value;
    }
  });
}
// Thêm nút Nhập lại
var resetButton = document.querySelector(".button-compact58");
if (resetButton) {
  resetButton.addEventListener("click", function (e) {
    // Reset lại các ô nhập liệu
    document.querySelector(".matb-text4").value = "";
    document.querySelector(".tentb-text4").value = "";
    document.querySelector(".ngaynhap-text4").value = "";
    document.querySelector(".sl-text4").value = "";
    document.querySelector(".ncc-text2").value = "";
    document.querySelector(".bh-text10").value = "";
    document.querySelector(".ghichu-text1").value = "";
    
    // Xóa chọn hàng được chọn
    var selectedRow = document.querySelector(".selected");
    if (selectedRow) {
      selectedRow.classList.remove("selected");
    }
  });
}

   // Function to filter table rows based on the search input
   function filterTable() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.querySelector(".timkiem-text4");
        filter = input.value.toUpperCase();
        table = document.querySelector("table");
        tr = table.getElementsByTagName("tr");

        for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td");
          for (var j =0; j < td.length; j++) {
            txtValue = td[j].textContent || td[j].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              tr[i].style.display = "";
              break;
            } else {
              tr[i].style.display = "none";
            }
          }
        }
      }

      // Add an event listener to the search input
      var searchInput = document.querySelector(".timkiem-text4");
      searchInput.addEventListener("keyup", filterTable);


      </script>
  </body>
</html>
