<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./frame-muon-t-b.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
    />
  </head>
  <body>
    <div class="frame-muon-tb">
      <div class="button-compact30">
        <b class="mn-thit-b3">MƯỢN THIẾT BỊ</b>
      </div>
      <div class="button-compact31" id="buttonCompact1">
        <b class="mn-thit-b3">TRẢ THIẾT BỊ</b>
      </div>
      <div class="button-compact32" id="buttonCompact2">
        <div class="frame-div">
          <b class="mn-thit-b3">NHẬP THIẾT BỊ</b>
        </div>
      </div>
      <div class="button-compact33" id="buttonCompact3">
        <div class="frame-div">
          <b class="mn-thit-b3">IN PHIẾU NHẬP</b>
        </div>
      </div>
      <div class="button-compact34" id="buttonCompact4">
        <div class="frame-div">
          <b class="mn-thit-b3">ĐĂNG XUẤT</b>
        </div>
      </div>
      <div class="danh-sch-mn-thit-b-parent">
        <b class="danh-sch-mn">DANH SÁCH MƯỢN THIẾT BỊ</b>
        <b class="m-phiu-mn">Mã phiếu mượn</b>
        <b class="ngi-mn">Người mượn</b>
        <b class="ngy-mn">Ngày mượn</b>
        <b class="ca-mn">Ca mượn</b>
        <input type="text" class="tentb-text2" ></input>
        <input type="text" class="sl-text2" ></input>
        <input type="date" class="ngaynhap-text2" ></input>
        <input type="text" class="matb-text2" ></input>
        <b class="gii-tnh1">Giới tính</b>
        <b class="s-lng1">Số lượng</b>
        <b class="tn-phng">Tên phòng</b>
        <b class="cccd1">CCCD</b>
        <input type="text" class="bh-text2" ></input>
        <input type="text" class="gia-text4" ></input>
        <input type="text" class="trinhtrang-text2" ></input> 
        <input type="text" class="timkiem-text2" ></input>
        <img
          class="search-24dp-fill0-wght400-grad-icon2"
          alt=""
          src="./public/search-24dp-fill0-wght400-grad0-opsz24-1@2x.png"
        />

        <button class="button-compact35">
          <div class="frame-div">
            <b class="mn-thit-b3">NHẬP LẠI</b>
          </div>
        </button>
        <button class="button-compact36" id="add-button" >
          <div class="frame-div">
            <b class="mn-thit-b3">THÊM</b>
          </div>
        </button>
        <button class="button-compact37">
          <div class="frame-div">
            <b class="mn-thit-b3">XÓA</b>
          </div>
        </button>
        <button class="button-compact38">
          <div class="frame-div">
            <b class="mn-thit-b3"> SỬA</b>
          </div>
        </button>
        <div class="dropdown">
          <select name="gioitinh" id="gioitinh">
            <option value="Nam">Nam</option>
            <option value="Nữ">Nữ</option>
          </select>
        </div>
        <b class="s-in-thoi1">Số điện thoại</b>
        <input type="text" class="bh-text3" ></input>
        <b class="tn-thit-b1">Tên thiết bị</b>
        <b class="m-nv">Mã NV</b>
        <b class="ghi-ch1">Ghi chú</b>
        <input type="text" class="bh-text4" ></input>
        <input type="text" class="bh-text5" ></input>
        <div class="dropdown1">
          <select name="NV" id="NV">
            <option value="NV001">NV001</option>
            <option value="NV002">NV002</option>
            <option value="NV003">NV003</option>
            <option value="NV004">NV004</option>
          </select>
        </div>
          <table class="table">
            <thead>
              <tr>
                <th>Mã phiếu mượn</th>
                <th>Người mượn</th>
                <th>Ngày mượn</th>
                <th>Ca mượn</th>
                <th>Giới tính</th>
                <th>Số lượng</th>
                <th>Tên phòng</th>
                <th>CCCD</th>
                <th>Số ĐT</th>
                <th>Tên thiết bị</th>
                <th>Mã NV</th>
                <th>Ghi chú</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>001</td>
                <td>Gv.Nguyễn Thị Xuân</td>
                <td>2023-11-01</td>
                <td>Sáng</td>
                <td>Nữ</td>
                <td>2</td>
                <td>Phòng lý thuyết 1</td>
                <td>085412345678</td>
                <td>0343 823 756</td>
                <td>1.Máy chiếu, 1.Remote</td>
                <td>NV001</td>
                <td></td>
              </tr>
              <tr>
                <td>002</td>
                <td>Gv.Bùi Quốc Tuấn</td>
                <td>2023-11-01</td>
                <td>Sáng</td>
                <td>Nam</td>
                <td>2</td>
                <td>Phòng lý thuyết 2</td>
                <td>089765436543</td>
                <td>0982 741 232</td>
                <td>1.Máy chiếu, 1.Remote</td>
                <td>NV001</td>
                <td></td>
              </tr>
              <tr>
                <td>003</td>
                <td>Gv.Nguyễn Gia Nghi</td>
                <td>2023-11-01</td>
                <td>Chiều</td>
                <td>Nam</td>
                <td>3</td>
                <td>Phòng lý thuyết 3</td>
                <td>085673290136</td>
                <td>0762 258 313</td>
                <td>1.Máy chiếu, 1.Remote, 1.Loa</td>
                <td>NV001</td>
                <td></td>
              </tr>
              <tr>
                <td>004</td>
                <td>Gv.Trần Văn Minh</td>
                <td>2023-11-02</td>
                <td>Sáng</td>
                <td>Nam</td>
                <td>16</td>
                <td>Phòng lý thuyết 4</td>
                <td>085934713168</td>
                <td>0128 356 440</td>
                <td>1.Ổ điện, 15.Nam châm</td>
                <td>NV002</td>
                <td></td>
              </tr>
              <tr> 
                
              </tr>
            </tbody>
          </table>
        </div>
      <div class="button-compact39" id="buttonCompact5">
        <b class="mn-thit-b3">DANH SÁCH THIẾT BỊ</b>
      </div>
      <div class="button-compact40" id="buttonCompact6">
        <b class="mn-thit-b3">DANH SÁCH NHÂN VIÊN</b>
      </div>
    </div>

    <script>
      var buttonCompact1 = document.getElementById("buttonCompact1");
      if (buttonCompact1) {
        buttonCompact1.addEventListener("click", function (e) {
          window.location.href = "./frame-tra-t-b.html";
        });
      }
      
      var buttonCompact2 = document.getElementById("buttonCompact2");
      if (buttonCompact2) {
        buttonCompact2.addEventListener("click", function (e) {
          window.location.href = "./frame-nhap-t-b.html";
        });
      }
      
      var buttonCompact3 = document.getElementById("buttonCompact3");
      if (buttonCompact3) {
        buttonCompact3.addEventListener("click", function (e) {
          window.location.href = "./frame-in-p-n.html";
        });
      }
      
      var buttonCompact4 = document.getElementById("buttonCompact4");
      if (buttonCompact4) {
        buttonCompact4.addEventListener("click", function (e) {
          window.location.href = "./frame-login.html";
        });
      }
      
      var buttonCompact5 = document.getElementById("buttonCompact5");
      if (buttonCompact5) {
        buttonCompact5.addEventListener("click", function (e) {
          window.location.href = "./frame-d-s-t-b.html";
        });
      }
      
      var buttonCompact6 = document.getElementById("buttonCompact6");
      if (buttonCompact6) {
        buttonCompact6.addEventListener("click", function (e) {
          window.location.href = "./frame-d-s-n-v.html";
        });
      }

// Thêm nút Thêm

var addButton = document.getElementById("add-button");
// Add event listener to the add button
addButton.addEventListener("click", function (e) {
  // Get the input values
  var mapm = document.querySelector(".matb-text2").value;
  var nguoimuon = document.querySelector(".tentb-text2").value;
  var ngaymuon = document.querySelector(".ngaynhap-text2").value;
  var camuon = document.querySelector(".sl-text2").value;
  var gioitinh = document.querySelector("#gioitinh").value;
  var sl = document.querySelector(".bh-text2").value;
  var tenphong = document.querySelector(".gia-text4").value;
  var cccd = document.querySelector(".trinhtrang-text2").value;
  var sdt = document.querySelector(".bh-text3").value;
  var tentb = document.querySelector(".bh-text5").value;
  var nv = document.querySelector("#NV").value;
  var ghichu = document.querySelector(".bh-text4").value;

  // Check if the input values are not empty
  if (
    mapm!= "" &&
    nguoimuon!= "" &&
    ngaymuon!= "" &&
    camuon!= "" &&
    gioitinh!= "" &&
    sl!= "" &&
    tenphong!= "" &&
    cccd!= "" &&
    sdt!= "" &&
    tentb!= "" &&
    nv!= ""
  ) {
    // Create a new row
    var newRow = document.createElement("tr");

    // Add cells to the row
    newRow.innerHTML = `
      <td>${mapm}</td>
      <td>${nguoimuon}</td>
      <td>${ngaymuon}</td>
      <td>${camuon}</td>
      <td>${gioitinh}</td>
      <td>${sl}</td>
      <td>${tenphong}</td>
      <td>${cccd}</td>
      <td>${sdt}</td>
      <td>${tentb}</td>
      <td>${nv}</td>
      <td>${ghichu}</td>
    `;

    // Append the new row to the table body
    document.querySelector("tbody").appendChild(newRow);
  } else {
    alert("Vui lòng điền đầy đủ thông tin!");
  }
});

// Thêm nút Xóa
var deleteButton = document.querySelector(".button-compact37");
if (deleteButton) {
  deleteButton.addEventListener("click", function (e) {
    // Thực hiện hành động xóa
    var table = document.querySelector("table");
    var selectedRows = table.querySelectorAll(".selected");
    // Xóa các hàng được chọn
    selectedRows.forEach(row => {
      table.deleteRow(row.rowIndex);
    });

    // Reset lại các ô nhập liệu
    document.querySelector(".matb-text2").value = "";
    document.querySelector(".tentb-text2").value = "";
    document.querySelector(".ngaynhap-text2").value = "";
    document.querySelector(".sl-text2").value = "";
    document.querySelector("#gioitinh").value = ""; // Reset Giới tính
    document.querySelector(".bh-text2").value = "";
    document.querySelector(".bh-text3").value = "";
    document.querySelector(".bh-text4").value = "";
    document.querySelector(".bh-text5").value = "";
    document.querySelector(".gia-text4").value = "";
    document.querySelector(".trinhtrang-text2").value = "";
    document.querySelector("#NV").value = ""; // Reset Mã NV

    // Xóa chọn hàng được chọn
    var selectedRow = document.querySelector(".selected");
    if (selectedRow) {
      selectedRow.classList.remove("selected");
    }
  });
}

// Add an event listener to the table rows
var table = document.querySelector("table");
if (table) {
  table.addEventListener("click", function (e) {
    // Get the selected row
    var row = e.target.parentNode;
    while (row.tagName !== "TR") {
      row = row.parentNode;
    }
    selectRow(row);
  });
}

function selectRow(row) {
  // Remove any existing selection
  var selectedRow = document.querySelector(".selected");
  if (selectedRow) {
    selectedRow.classList.remove("selected");
  }
  
  // Add the selected class to the row
  row.classList.add("selected");
  
  // Get the row data
  var rowData = [];
  for (var i = 0; i < row.cells.length; i++) {
    rowData.push(row.cells[i].textContent.trim()); // Trim any extra whitespace
  }

  // Fill in the edit form with the row data
  document.querySelector(".matb-text2").value = rowData[0]; //mapn
  document.querySelector(".tentb-text2").value = rowData[1];
  document.querySelector(".ngaynhap-text2").value = rowData[2]; 
  document.querySelector(".sl-text2").value = rowData[3];//camuon
  document.querySelector(".bh-text2").value = rowData[5];
  document.querySelector(".gia-text4").value = rowData[6];
  document.querySelector(".trinhtrang-text2").value = rowData[7];
  document.querySelector(".bh-text3").value = rowData[8]; 
  document.querySelector(".bh-text5").value = rowData[9];
  document.querySelector(".bh-text4").value = rowData[11];
   //tenphong
  // Set the "Giới tính" dropdown
  var gioitinhDropdown = document.getElementById('gioitinh');
  gioitinhDropdown.value = rowData[4]; // Adjust index if needed

  // Set the "Mã NV" dropdown
  var NVDropdown = document.getElementById('NV');
  NVDropdown.value = rowData[10]; // Adjust index if needed

}

// Add an event listener to the edit button
var editButton = document.querySelector(".button-compact38");
if (editButton) {
  editButton.addEventListener("click", function (e) {
    // Get the selected row
    var selectedRow = document.querySelector(".selected");
    if (selectedRow) {
      // Update the row data with the edited values

      selectedRow.cells[0].innerHTML = document.querySelector(".matb-text2").value; //mapn
      selectedRow.cells[1].innerHTML = document.querySelector(".tentb-text2").value;
      selectedRow.cells[2].innerHTML = document.querySelector(".ngaynhap-text2").value; 
      selectedRow.cells[3].innerHTML = document.querySelector(".sl-text2").value;//camuon
      selectedRow.cells[5].innerHTML = document.querySelector(".bh-text2").value;
      selectedRow.cells[6].innerHTML = document.querySelector(".gia-text4").value;
      selectedRow.cells[7].innerHTML = document.querySelector(".trinhtrang-text2").value;
      selectedRow.cells[8].innerHTML = document.querySelector(".bh-text3").value; 
      selectedRow.cells[9].innerHTML = document.querySelector(".bh-text5").value;
      selectedRow.cells[11].innerHTML = document.querySelector(".bh-text4").value;
      selectedRow.cells[4].innerHTML = document.querySelector("#gioitinh").value;
      selectedRow.cells[10].innerHTML = document.querySelector("#NV").value;

    }
  });
}
// Thêm nút Nhập lại
var resetButton = document.querySelector(".button-compact35");
if (resetButton) {
  resetButton.addEventListener("click", function (e) {
    // Reset lại các ô nhập liệu
    document.querySelector(".matb-text2").value = "";
    document.querySelector(".tentb-text2").value = "";
    document.querySelector(".ngaynhap-text2").value = "";
    document.querySelector(".sl-text2").value = "";
    document.querySelector("#gioitinh").value = ""; // Reset Giới tính
    document.querySelector(".bh-text2").value = "";
    document.querySelector(".bh-text3").value = "";
    document.querySelector(".bh-text4").value = "";
    document.querySelector(".bh-text5").value = "";
    document.querySelector(".gia-text4").value = "";
    document.querySelector(".trinhtrang-text2").value = "";
    document.querySelector("#NV").value = ""; // Reset Mã NV
   
    
    // Xóa chọn hàng được chọn
    var selectedRow = document.querySelector(".selected");
    if (selectedRow) {
      selectedRow.classList.remove("selected");
    }
  });
}

   // Function to filter table rows based on the search input
   function filterTable() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.querySelector(".timkiem-text2");
        filter = input.value.toUpperCase();
        table = document.querySelector("table");
        tr = table.getElementsByTagName("tr");

        for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td");
          for (var j =0; j < td.length; j++) {
            txtValue = td[j].textContent || td[j].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              tr[i].style.display = "";
              break;
            } else {
              tr[i].style.display = "none";
            }
          }
        }
      }

      // Add an event listener to the search input
      var searchInput = document.querySelector(".timkiem-text2");
      searchInput.addEventListener("keyup", filterTable);

      </script>
  </body>
</html>
